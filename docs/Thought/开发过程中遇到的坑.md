# 平时开发遇到的问题

##  并发问题 重复插入问题 
> 当时是一个直播回放记录 本来是我只要一条的但是 第三方可能会发2分同时发来 然后我们就只要一条 然后我自己做幂等校验 用了synchronized 发现2个并发变成了串行执行
，但是因为我再这个service 中加了@Transactional(rollbackFor = Exception.class) 这个注解 导致 用了synchronized 并没有锁住这个事务 从而导致了 并发插入了脏数据
在多线程环境下，就可能会出现：方法执行完了(synchronized代码块执行完了)，事务还没提交，别的线程可以进入被synchronized修饰的方法，再读取的时候，读到的是还没提交事务的数据，这个数据不是最新的，所以就出现了这个问题。
> [刚好看到了](https://juejin.im/post/5c695b44e51d45164c759c36)
>[自己写的](https://juejin.im/post/5ddc7a23e51d452331202721)

## 记一次大List问题 

> 有一个很大的list。没有初始化容量，导致 线上三高（高CUP、高内存、高IO）。通过一系列骚操作之后发现，线上的Eden 区和 old 区都快占满了，而且fgc 比较频繁。

>解决 就是初始化List容量

### 线程安全问题
>  前面一个线程 还没设置了一个可变的属性 刚好准备返回的时候 ，下一个线程把这个线程改了 这样你就返回了一个错误的数据了
>  再使枚举的时候 就不应该带有状态的熟悉 （能修改，可变的熟悉） 
